# 日本語（UTF-8）を正しく扱うための設定
[mysqld]
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# --- パフォーマンスチューニング ---

# E2Eテストと日本語検索のための設定
ft_min_word_len=1
ngram_token_size=2

# 接続数の上限を増やす (重要)
max_connections = 400

# メモリ関連のチューニング
innodb_buffer_pool_size = 1G
innodb_buffer_pool_instances = 2

# 不要なログを無効化してオーバーヘッドを削減
disable-log-bin
performance_schema = OFF
slow_query_log = OFF
general_log = OFF

# その他
lower_case_table_names=1
secure_file_priv="/docker-entrypoint-initdb.d/csv"
max_allowed_packet=1G # 2Gは過剰なため少し下げています

[mysqldump]
max_allowed_packet = 1G

[client]
default-character-set = utf8mb4
